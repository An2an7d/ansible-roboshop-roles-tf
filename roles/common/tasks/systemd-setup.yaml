- name: Fetch SSM Parameter
  aws_ssm:
    name: /roboshop/dev/mongodb_url
  register: ssm_result

- name: Debug SSM Parameter Value
  debug:
    msg: "{{ssm_result.parameter.value}}"

- name: copy systemd template
  ansible.builtin.template:
    src: "{{component}}.service"
    dest: /etc/systemd/system/{{component}}.service

- name: daemon-reload
  ansible.builtin.systemd:
    daemon-reload: yes
    
- name: restart {{component}}
  ansible.builtin.service:
    state: restarted
    name: "{{component}}"
    enabled: yes